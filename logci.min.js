/*! logci - v0.2.1 - https://github.com/zensh/logci - (c) 2013  - licensed MIT */
"use strict";!function(){function a(){}function b(a){return"object"==typeof a}function c(a){return"function"==typeof a}function d(a){return"string"==typeof a}function e(a){return"undefined"!=typeof a}function f(a,b,c){for(var d in a)m.call(a,d)&&b.call(c,a[d],d,a)}function g(a){r.space=a.space||r.space,r.token=a.token||r.token,b(a.slient)&&f(p,function(b,c){b=a.slient[c],e(b)&&(p[c]=b)}),b(a.report)&&f(q,function(b,c){b=a.report[c],e(b)&&(q[c]=b)})}function h(a,c){if(a){b(a)||(a=new Error(a),a.name="LogCI"),a instanceof Error&&(a.name=a.name,a.message=a.message,a.stack=a.stack||a.description,delete a.domain),a.logType=c;try{a=JSON.stringify(a)}catch(e){}return d(a)?a:""}}function i(a){var b="";return a&&r.space&&r.token&&(b+=document&&"https:"===document.location.protocol?"https://":"http://",b+=n+"/"+r.space,b+="?token="+r.token,b+="&log="+encodeURIComponent(a)),b}function j(a){if(Image){var b=new Image;b.onload=b.onerror=b.abort=function(){b=b.onload=b.onerror=b.abort=null},b.src=a}}function k(a,b){a=h(a,b),a&&j(i(a))}function l(a){if(c(a))try{a()}catch(d){l.error(d)}else b(a)&&g(a)}var m=Object.prototype.hasOwnProperty,n="logci.com",o=console||{},p={},q={},r={space:"",token:"",slient:p,report:q};f(["log","info","warn","error"],function(b){o[b]=c(o[b])?o[b]:a,p[b]=!1,q[b]=!1,l[b]=function(){p[b]||o[b].apply(o,arguments),q[b]&&k(arguments[0],d(arguments[1])?arguments[1]:b)}}),p.globalError=!1,q.globalError=!1,"object"==typeof module&&module.exports?(j=require("./lib/node_request.js"),module.exports=l):"function"==typeof define&&define.amd&&define(function(){return l}),"object"==typeof window&&(window.logci=l,window.onerror=function(a,b,c,d,e){return q.globalError&&k(e||{name:a.match(/\b([A-Z]){1}\w+Error/)[0]||a,message:a,stack:a+"\n    at "+b+":"+c},"globalError"),p.globalError})}();