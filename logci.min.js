/*! logci - v0.2.0 - https://github.com/zensh/logci - (c) 2013  - licensed MIT */
"use strict";!function(a){function b(){}function c(a){return"object"==typeof a}function d(a){return"function"==typeof a}function e(a){return"string"==typeof a}function f(a){return"undefined"!=typeof a}function g(a,b,c){for(var d in a)n.call(a,d)&&b.call(c,a[d],d,a)}function h(a){s.space=a.space||s.space,s.token=a.token||s.token,c(a.slient)&&g(q,function(b,c){b=a.slient[c],f(b)&&(q[c]=b)}),c(a.report)&&g(r,function(b,c){b=a.report[c],f(b)&&(r[c]=b)})}function i(b,d){if(b){c(b)||(b=new Error(b),b.name="LogCI"),b instanceof Error&&(b.name=b.name,b.message=b.message,b.stack=b.stack||b.description||a,delete b.domain),b.logType=d;try{b=JSON.stringify(b)}catch(f){}return e(b)?b:""}}function j(a){var b="";return a&&s.space&&s.token&&(b+=document&&"https:"===document.location.protocol?"https://":"http://",b+=o+"/"+s.space,b+="?token="+s.token,b+="&log="+encodeURIComponent(a)),b}function k(a){if(Image){var b=new Image;b.onload=b.onerror=b.abort=function(){b=b.onload=b.onerror=b.abort=null},b.src=a}}function l(a,b){a=i(a,b),a&&k(j(a))}function m(a){if(d(a))try{a()}catch(b){m.error(b)}else c(a)&&h(a)}var n=Object.prototype.hasOwnProperty,o="logci.com",p=console||{},q={},r={},s={space:"",token:"",slient:q,report:r};if(g(["log","info","warn","error"],function(a){p[a]=d(p[a])?p[a]:b,q[a]=!1,r[a]=!1,m[a]=function(){q[a]||p[a].apply(p,arguments),r[a]&&l(arguments[0],e(arguments[1])?arguments[1]:a)}}),q.windowError=!1,r.windowError=!1,"object"==typeof module&&module.exports?(k=require("./lib/node_request.js"),module.exports=m):"function"==typeof define&&define.amd&&define(function(){return m}),"object"==typeof window){window.logci=m;var t=window.onerror;window.onerror=function(a,b,c,e,f){return r.windowError&&l(f||{name:a.match(/([A-Z]){1}\w+Error/)[0]||a,message:a,stack:a+"\n at "+b+":"+c},"windowError"),d(t)&&t(a,b,c,e,f),q.windowError}}}();